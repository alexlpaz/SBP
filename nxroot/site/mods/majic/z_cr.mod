////////////////////////////////////////////////////////////////////////////
// Module:      z_cr.mod
// Author:      Alex Paz
// Created:     Wednesday, June 19, 2013 4:59:45 PM
////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////
//
// Description: 
//              
////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// DB INIT - 3xxx


////////////////////////////////////////////////////////////////////////////////
// NEW_INIT - 4xxx


////////////////////////////////////////////////////////////////////////////////
// Pre Validate - 5xxx
// Author:      Alex Paz - Wednesday, June 19, 2013 5:00:08 PM 
// Description: Define o tipo do ticket de acordo com o atributo z_srl_tipo da categoria 
MODIFY cr PRE_VALIDATE
    z_cr_def_tipo_ticket( category )
    5000 FILTER( (EVENT("INSERT UPDATE")) && ( category{} ) && type != "P") ;
////////////////////////////////////////////////////////////////////////////////
// Post Validate - 6xxx


////////////////////////////////////////////////////////////////////////////////
// Post CI - 7xxx
// Author:      Alex Paz - Friday, June 21, 2013 12:37:24 PM 
// Description: Controla ciclo de vida do ticket depende de 
MODIFY cr POST_CI
    z_cr_status_depende( persistent_id, z_srl_cr )
    7000 FILTER( (EVENT("INSERT UPDATE")) && z_srl_cr!=NULL && status{} ) ;
